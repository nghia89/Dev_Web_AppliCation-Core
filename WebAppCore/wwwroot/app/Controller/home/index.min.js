var HomeController = function () { function e(e, t) { $.ajax({ type: "GET", url: "/Admin/Home/GetRevenue", data: { fromDate: e, toDate: t }, dataType: "json", beforeSend: function () { structures.startLoading() }, success: function (e) { !function (e) { var t = [], o = []; $.each(e, function (e, o) { t.push([new Date(o.Date).getTime(), o.Revenue]) }), $.each(e, function (e, t) { o.push([new Date(t.Date).getTime(), t.Profit]) }); $("#chart_plot_02").length && (console.log("Plot2"), $.plot($("#chart_plot_02"), [{ label: "Revenue", data: t, lines: { fillColor: "rgba(150, 202, 89, 0.12)" }, points: { fillColor: "#fff" } }, { label: "Profit", data: o, lines: { fillColor: "rgba(140, 232, 289, 0.12)" }, points: { fillColor: "#fff" } }], { grid: { show: !0, aboveData: !0, color: "#3f3f3f", labelMargin: 10, axisMargin: 0, borderWidth: 0, borderColor: null, minBorderMargin: 5, clickable: !0, hoverable: !0, autoHighlight: !0, mouseActiveRadius: 100 }, series: { lines: { show: !0, fill: !0, lineWidth: 2, steps: !1 }, points: { show: !0, radius: 4.5, symbol: "circle", lineWidth: 3 } }, legend: { position: "ne", margin: [0, -25], noColumns: 0, labelBoxBorderColor: null, labelFormatter: function (e, t) { return e + "&nbsp;&nbsp;" }, width: 40, height: 1 }, colors: ["#96CA59", "#3F97EB", "#72c380", "#6f7a8a", "#f7cb38", "#5a8022", "#2c7282"], shadowSize: 0, tooltip: !0, tooltipOpts: { content: "%s: %y.0", xDateFormat: "%d/%m", shifts: { x: -30, y: -50 }, defaultTheme: !1 }, yaxis: { min: 0 }, xaxis: { mode: "time", minTickSize: [1, "day"], timeformat: "%d/%m/%y" } })) }(e), structures.stopLoading() }, error: function (e) { structures.notify("Có lỗi xảy ra", "error"), structures.stopLoading() } }) } this.initialize = function () { !function () { if (void 0 === $.fn.daterangepicker) return; console.log("init_daterangepicker"); var t = function (e, t, o) { console.log(e.toISOString(), t.toISOString(), o), $("#reportrange span").html(e.format("MMMM D, YYYY") + " - " + t.format("MMMM D, YYYY")) }, o = { startDate: moment().subtract(29, "days"), endDate: moment(), minDate: "01/01/2017", maxDate: moment().format("MM/DD/YYYY"), dateLimit: { days: 60 }, showDropdowns: !0, showWeekNumbers: !0, timePicker: !1, timePickerIncrement: 1, timePicker12Hour: !0, ranges: { Today: [moment(), moment()], Yesterday: [moment().subtract(1, "days"), moment().subtract(1, "days")], "Last 7 Days": [moment().subtract(6, "days"), moment()], "Last 30 Days": [moment().subtract(29, "days"), moment()], "This Month": [moment().startOf("month"), moment().endOf("month")], "Last Month": [moment().subtract(1, "month").startOf("month"), moment().subtract(1, "month").endOf("month")] }, opens: "left", buttonClasses: ["btn btn-default"], applyClass: "btn-small btn-primary", cancelClass: "btn-small", format: "MM/DD/YYYY", separator: " to ", locale: { applyLabel: "Submit", cancelLabel: "Clear", fromLabel: "From", toLabel: "To", customRangeLabel: "Custom", daysOfWeek: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], firstDay: 1 } }; $("#reportrange span").html(moment().subtract(29, "days").format("MMMM D, YYYY") + " - " + moment().format("MMMM D, YYYY")), $("#reportrange").daterangepicker(o, t), $("#reportrange").on("show.daterangepicker", function () { console.log("show event fired") }), $("#reportrange").on("hide.daterangepicker", function () { console.log("hide event fired") }), $("#reportrange").on("apply.daterangepicker", function (t, o) { console.log("apply event fired, start/end dates are " + o.startDate.format("MMMM D, YYYY") + " to " + o.endDate.format("MMMM D, YYYY")), e(o.startDate.format("MM/DD/YYYY"), o.endDate.format("MM/DD/YYYY")) }), $("#reportrange").on("cancel.daterangepicker", function (e, t) { console.log("cancel event fired") }), $("#options1").click(function () { $("#reportrange").data("daterangepicker").setOptions(o, t) }), $("#options2").click(function () { $("#reportrange").data("daterangepicker").setOptions(optionSet2, t) }), $("#destroy").click(function () { $("#reportrange").data("daterangepicker").remove() }) }(), e() } };
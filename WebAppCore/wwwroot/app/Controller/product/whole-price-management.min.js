var WholePriceManagement = function (t) { this.initialize = function () { $("body").on("click", ".btn-whole-price", function (t) { t.preventDefault(); var e = $(this).data("id"); $("#hidId").val(e), $.ajax({ url: "/admin/Product/GetWholePrices", data: { productId: $("#hidId").val() }, type: "get", dataType: "json", success: function (t) { var e = "", i = $("#template-table-whole-price").html(); $.each(t, function (t, a) { e += Mustache.render(i, { Id: a.Id, FromQuantity: a.FromQuantity, ToQuantity: a.ToQuantity, Price: a.Price }) }), $("#table-content-whole-price").html(e) } }), $("#modal-whole-price").modal("show") }), $("body").on("click", ".btn-delete-whole-price", function (t) { t.preventDefault(), $(this).closest("tr").remove() }), $("#btn-add-whole-price").on("click", function () { var t = $("#template-table-whole-price").html(), e = Mustache.render(t, { Id: 0, FromQuantity: 0, ToQuantity: 0, Price: 0 }); $("#table-content-whole-price").append(e) }), $("#btnSaveWholePrice").on("click", function () { var t = []; $.each($("#table-content-whole-price").find("tr"), function (e, i) { t.push({ Id: $(i).data("id"), ProductId: $("#hidId").val(), FromQuantity: $(i).find("input.txtQuantityFrom").first().val(), ToQuantity: $(i).find("input.txtQuantityTo").first().val(), Price: $(i).find("input.txtWholePrice").first().val() }) }), $.ajax({ url: "/admin/Product/SaveWholePrice", data: { productId: $("#hidId").val(), wholePrices: t }, type: "post", dataType: "json", success: function (t) { $("#modal-whole-price").modal("hide"), $("#table-content-whole-price").html("") } }) }) } };
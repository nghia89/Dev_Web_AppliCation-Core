var ImageManagement = function () { var a = []; function e(a) { try { a.value = null } catch (a) { throw a } a.value && a.parentNode.replaceChild(a.cloneNode(!0), a) } this.initialize = function () { $("body").on("click", ".btn-images", function (a) { a.preventDefault(); var t = $(this).data("id"); $("#hidId").val(t), e($("#fileImage")), $.ajax({ url: "/admin/Product/GetImages", data: { productId: $("#hidId").val() }, type: "get", dataType: "json", success: function (a) { var t = ""; $.each(a, function (a, e) { t += '<div class="col-md-3"><img width="100" src="' + e.Path + '" data-path="' + e.Path + '"><br/><a href="#" class="btn-delete-image">Xóa</a></div>' }), $("#image-list").html(t), e($("#fileImage")) } }), $("#modal-image-manage").modal("show") }), $("body").on("click", ".btn-delete-image", function (a) { a.preventDefault(), $(this).closest("div").remove() }), $("#fileImage").on("change", function () { for (var t = $(this).get(0), i = t.files, n = new FormData, d = 0; d < i.length; d++)n.append(i[d].name, i[d]); $.ajax({ type: "POST", url: "/Admin/Upload/UploadImage", contentType: !1, processData: !1, data: n, success: function (t) { e($("#fileImage")), a.push(t), $("#image-list").append('<div class="col-md-3"><img width="100"  data-path="' + t.FileName + '" src="' + t.FileName + '"></div>'), structures.notify("Đã tải ảnh lên thành công!", "success") }, error: function () { structures.notify("There was error uploading files!", "error") } }) }), $("#btnSaveImages").on("click", function () { var a = []; $.each($("#image-list").find("img"), function (e, t) { a.push($(this).data("path")) }), $.ajax({ url: "/admin/Product/SaveImages", data: { productId: $("#hidId").val(), images: a }, type: "post", dataType: "json", success: function (a) { $("#modal-image-manage").modal("hide"), $("#image-list").html(""), e($("#fileImage")) } }) }) } };
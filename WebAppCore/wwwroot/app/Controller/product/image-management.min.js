var ImageManagement = function () { function a(a) { try { a.value = null } catch (a) { throw a } a.value && a.parentNode.replaceChild(a.cloneNode(!0), a) } this.initialize = function () { $("body").on("click", ".btn-images", function (e) { e.preventDefault(); var t = $(this).data("id"); $("#hidId").val(t), a($("#fileImage")), $.ajax({ url: "/admin/Product/GetImages", data: { productId: $("#hidIdM").val() }, type: "get", dataType: "json", success: function (e) { var t = ""; $.each(e, function (a, e) { t += '<div class="col-md-3"><img width="100" src="' + e.Path + '" data-path="' + e.Path + '"><br/><a href="#" class="btn-delete-image">Xóa</a></div>' }), $("#image-list").html(t), a($("#fileImage")) } }), $("#modal-image-manage").modal("show") }), $("body").on("click", ".btn-delete-image", function (a) { a.preventDefault(), $(this).closest("div").remove() }), $("#fileImage").on("change", function () { for (var e = $(this).get(0), t = e.files, i = new FormData, n = 0; n < t.length; n++)i.append(t[n].name, t[n]); $.ajax({ type: "POST", url: "/Admin/Upload/UploadImage", contentType: !1, processData: !1, data: i, success: function (e) { a($("#fileImage")), $.each(e, function (a, e) { $("#image-list").append('<div class="col-md-3"><img width="100"  data-path="' + e.FileName + '" src="' + e.FileName + '"><br/><a href="#" class="btn-delete-image">Xóa</a></div>') }), structures.notify("Đã tải ảnh lên thành công!", "success") }, error: function () { structures.notify("There was error uploading files!", "error") } }) }), $("#btnSaveImages").on("click", function () { var e = []; $.each($("#image-list").find("img"), function (a, t) { e.push($(this).data("path")) }), $.ajax({ url: "/admin/Product/SaveImages", data: { productId: $("#hidIdM").val(), images: e }, type: "post", dataType: "json", success: function (e) { $("#modal-image-manage").modal("hide"), $("#image-list").html(""), a($("#fileImage")) } }) }) } };
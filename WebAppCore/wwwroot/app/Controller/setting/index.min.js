var settingController = function () { this.initialize = function () { $.ajax({ type: "GET", url: "/Admin/Setting/GetById", data: {}, dataType: "json", beforeSend: function () { structures.startLoading() }, success: function (t) { var e = t; $("#hidId").val(e.Id), $("#txtTitle").val(e.Title), $("#txtDesc").val(e.Description), $("#txtKeywords").val(e.Keywords), $("#txtCopyright").val(e.Copyright), $("#txtAuthor").val(e.Author), $("#txtImage").val(e.Logo), structures.stopLoading() }, error: function (t) { structures.notify("Có lỗi xảy ra", "error"), structures.stopLoading() } }), $("#ddl-show-page").on("change", function () { structures.configs.pageSize = $(this).val(), structures.configs.pageIndex = 1, loadData(!0) }), $("#btnSave").on("click", function (t) { !function (t) { $("#frmMaintainance").valid() && (t.preventDefault(), id = $("#hidId").val(), title = $("#txtTitle").val(), keywords = $("#txtDesc").val(), description = $("#txtKeywords").val(), copyright = $("#txtCopyright").val(), author = $("#txtAuthor").val(), logo = $("#txtImage").val(), $.ajax({ type: "POST", url: "/Admin/Setting/SaveEntity", data: { Id: id, Title: title, Keywords: keywords, Description: description, Copyright: copyright, Author: author, Logo: logo }, dataType: "json", beforeSend: function () { structures.startLoading() }, success: function (t) { structures.notify("Thêm thành công", "success"), structures.stopLoading(), loadData(!0) }, error: function () { structures.notify("Có lổi trong quá trình thêm.", "error"), structures.stopLoading() } })) }(t) }), $("#btnSelectImg").on("click", function () { $("#fileInputImage").click() }), $("#fileInputImage").on("change", function () { for (var t = $(this).get(0), e = t.files, o = new FormData, n = 0; n < e.length; n++)o.append(e[n].name, e[n]); $.ajax({ type: "POST", url: "/Admin/Upload/UploadLogo", contentType: !1, processData: !1, data: o, success: function (t) { $("#txtImage").val(t), structures.notify("Upload image succesful!", "success") }, error: function () { structures.notify("There was error uploading files!", "error") } }) }), CKEDITOR.replace("txtContent", {}), $.fn.modal.Constructor.prototype.enforceFocus = function () { $(document).off("focusin.bs.modal").on("focusin.bs.modal", $.proxy(function (t) { this.$element[0] === t.target || this.$element.has(t.target).length || $(t.target).closest(".cke_dialog, .cke").length || this.$element.trigger("focus") }, this)) } } };